image:
  file: .gitpod.Dockerfile

tasks:
  - name: tailscaled
    command: |
      if [ -n "${TAILSCALE_STATE_AdventOfCode}" ]; then
        # restore the tailscale state from gitpod user's env vars
        sudo mkdir -p /var/lib/tailscale
        echo "${TAILSCALE_STATE_AdventOfCode}" | sudo tee /var/lib/tailscale/tailscaled.state > /dev/null
      fi
      sudo tailscaled
  - name: tailscale
    command: |
      if [ -n "${TAILSCALE_STATE_AdventOfCode}" ]; then
        sudo -E tailscale up
      else
        sudo -E tailscale up --hostname "gitpod-${GITPOD_GIT_USER_NAME// /-}-$(echo ${GITPOD_WORKSPACE_CONTEXT} | jq -r .repository.name)"
        # store the tailscale state into gitpod user
        gp env TAILSCALE_STATE_AdventOfCode="$(sudo cat /var/lib/tailscale/tailscaled.state)"
      fi

github:
  prebuilds:
    master: true
    branches: true
    pullRequests: true
    pullRequestsFromForks: false
    addCheck: true
    addComment: false
    addBadge: true

vscode:
  extensions:
    - 'Bridgecrew.checkov'
    - 'Dart-Code.dart-code'
    - 'Dart-Code.flutter'
    - 'DavidAnson.vscode-markdownlint'
    - 'EditorConfig.EditorConfig'
    - 'ExodiusStudios.comment-anchors'
    - 'GitHub.copilot'
    - 'GraphQL.vscode-graphql'
    - 'GraphQL.vscode-graphql-execution'
    - 'GraphQL.vscode-graphql-syntax'
    - 'Gruntfuggly.todo-tree'
    - 'Ikuyadeu.r-pack'
    - 'Infracost.infracost'
    - 'JScearcy.rust-doc-viewer'
    - 'Nash.awesome-flutter-snippets'
    - 'Orta.vscode-jest'
    - 'Prisma.prisma'
    - 'RDebugger.r-debugger'
    - 'REditorSupport.r'
    - 'SebastianBille.iam-legend'
    - 'Shopify.theme-check-vscode'
    - 'Swellaby.common-pack'
    - 'Swellaby.vscode-rust-test-adapter'
    - 'Swellaby.workspace-config-plus'
    - 'TianyiShi.rmarkdown'
    - 'Tyriar.sort-lines'
    - 'WakaTime.vscode-wakatime'
    - 'WallabyJs.quokka-vscode'
    - 'WallabyJs.wallaby-vscode'
    - 'Zerotaskx.rust-extension-pack'
    - 'ZixuanChen.vitest-explorer'
    - 'aaron-bond.better-comments'
    - 'agutierrezr.emmet-keybindings'
    - 'agutierrezr.vscode-essentials'
    - 'akamud.vscode-theme-onedark'
    - 'albert.TabOut'
    - 'alefragnani.Bookmarks'
    - 'amazonwebservices.aws-toolkit-vscode'
    - 'anteprimorac.html-end-tag-labels'
    - 'ask-toolkit.alexa-skills-kit-toolkit'
    - 'async-aesop.aesop'
    - 'austenc.tailwind-docs'
    - 'bajdzis.vscode-database'
    - 'bbugh.change-color-format'
    - 'bradlc.vscode-tailwindcss'
    - 'cab404.vscode-direnv'
    - 'casperstorm.directory-files'
    - 'cipchk.cssrem'
    - 'cpylua.language-postcss'
    - 'cschlosser.doxdocgen'
    - 'cssho.vscode-svgviewer'
    - 'ctf0.macros'
    - 'dbaeumer.vscode-eslint'
    - 'deerawan.vscode-faker'
    - 'dionmunk.vscode-notes'
    - 'donjayamanne.githistory'
    - 'eamodio.gitlens'
    - 'ecmel.vscode-html-css'
    - 'esbenp.prettier-vscode'
    - 'fudd.toggle-zen-mode'
    - 'gamunu.vscode-yarn'
    - 'gitpod.gitpod-desktop'
    - 'gitpod.gitpod-remote-ssh'
    - 'golang.go'
    - 'grokjs.grok-js'
    - 'hashicorp.terraform'
    - 'hbenl.vscode-test-explorer'
    - 'hdevalke.rust-test-lens'
    - 'helixquar.randomeverything'
    - 'humao.rest-client'
    - 'jasonlhy.hungry-delete'
    - 'johnpapa.vscode-peacock'
    - 'josetr.cmake-language-support-vscode'
    - 'jsayol.firebase-explorer'
    - 'kruemelkatze.vscode-dashboard'
    - 'kubescape.kubescape'
    - 'macabeus.vscode-fluent'
    - 'mathematic.vscode-latex'
    - 'matt-meyers.vscode-dbml'
    - 'mdickin.markdown-shortcuts'
    - 'me-dutour-mathieu.vscode-github-actions'
    - 'mgmcdermott.vscode-language-babel'
    - 'mikestead.dotenv'
    - 'mohsen1.prettify-json'
    - 'mrmlnc.vscode-scss'
    - 'ms-azuretools.vscode-docker'
    - 'ms-dotnettools.vscode-dotnet-runtime'
    - 'ms-kubernetes-tools.kind-vscode'
    - 'ms-kubernetes-tools.vscode-kubernetes-tools'
    - 'ms-ossdata.vscode-postgresql'
    - 'ms-playwright.playwright'
    - 'ms-python.isort'
    - 'ms-python.python'
    - 'ms-python.vscode-pylance'
    - 'ms-toolsai.jupyter'
    - 'ms-toolsai.jupyter-keymap'
    - 'ms-toolsai.jupyter-renderers'
    - 'ms-toolsai.vscode-jupyter-cell-tags'
    - 'ms-toolsai.vscode-jupyter-slideshow'
    - 'ms-vscode-remote.remote-containers'
    - 'ms-vscode-remote.remote-ssh'
    - 'ms-vscode-remote.remote-ssh-edit'
    - 'ms-vscode-remote.remote-wsl'
    - 'ms-vscode-remote.vscode-remote-extensionpack'
    - 'ms-vscode.hexeditor'
    - 'ms-vscode.live-server'
    - 'ms-vscode.makefile-tools'
    - 'ms-vscode.powershell'
    - 'ms-vscode.remote-explorer'
    - 'ms-vscode.test-adapter-converter'
    - 'ms-vscode.vscode-typescript-next'
    - 'ms-vsliveshare.vsliveshare'
    - 'ms-vsliveshare.vsliveshare-audio'
    - 'ms-vsliveshare.vsliveshare-pack'
    - 'panicbit.cargo'
    - 'pdconsec.vscode-print'
    - 'phr0s.bib'
    - 'piotrpalarz.vscode-gitignore-generator'
    - 'quarto.quarto'
    - 'quicktype.quicktype'
    - 'redhat.fabric8-analytics'
    - 'redhat.vscode-commons'
    - 'redhat.vscode-yaml'
    - 'richie5um2.vscode-sort-json'
    - 'rubbersheep.gi'
    - 'rust-lang.rust-analyzer'
    - 'ryu1kn.partial-diff'
    - 'sburg.vscode-javascript-booster'
    - 'serayuzgur.crates'
    - 'sibiraj-s.vscode-scss-formatter'
    - 'softwaredotcom.swdc-vscode'
    - 'streetsidesoftware.code-spell-checker'
    - 'svelte.svelte-vscode'
    - 'syler.sass-indented'
    - 'tamasfe.even-better-toml'
    - 'tfsec.tfsec'
    - 'toba.vsfire'
    - 'torn4dom4n.latex-support'
    - 'trond-snekvik.simple-rst'
    - 'usernamehw.errorlens'
    - 'vadimcn.vscode-lldb'
    - 'vscode-icons-team.vscode-icons'
    - 'vsls-contrib.gistfs'
    - 'wix.vscode-import-cost'
    - 'wmaurer.change-case'
    - 'yatki.vscode-surround'
    - 'yzhang.markdown-all-in-one'
